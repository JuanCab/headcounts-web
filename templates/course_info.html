{% extends "bootstrap/base.html" %}

<link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" >

{% block content %}
<div class='container'>
<h2> {{ subject }} Data for {% if year_term[0] == year_term[-1] %} {{ year_term[0] }} {% else %} {{ year_term[0] }} to {{ year_term[-1] }} {% endif %}</h2>
<table class="table table-striped table-bordered" style="width: 80%;">
<tbody>
<tr><td style="text-align: right; width: 60%;">Credit hours generated by these {{ n_rows }} courses (assume variable credit is 1 credit):</td><td style="width: 20%">{{ sch }}</td></tr>
<tr><td style="text-align: right; width: 60%;">Calculated tuition revenue (assuming all in-state):</td><td style="width: 20%">{{ revenue }}</td></tr>
<tr><td style="text-align: right; width: 60%;">Total empty seats in these courses (excludes canceled):<br/>(<b>Note</b>: the number of empty seats is the course size limit (Size) minus the enrollment or zero if the course is over-enrolled.)</td>
    <td style="width: 20%">{{ seats['empty'] }} of {{ seats['available'] }} available<br/>({{ (100 * seats['empty'] / seats['available']) | round(2) }}% empty)</td></tr>
<tr><td colspan=2>The data in this table was gathered {% if oldest != most_recent %} between {{ oldest }} and {{ most_recent }}{% else %} on {{ most_recent }}{% endif %}.</td></tr>
</tbody>
</table>

<h4>The table shown below {% if n_rows < max_rows %} contains {{ n_rows }}{% else %} only contains the first {{ max_rows }} of {{ n_rows }} {% endif %} rows of data. The full dataset is available as a <a href="{{ url_for('download', filename=filename) }}">CSV file (Download here)</a></h4>

<table class="table table-striped table-bordered table-responsive table-hover">

<thead>
    {% for h in table.columns %}
        <th>{{ h }}</th>
    {% endfor %}
</thead>

<tbody>
    {% for row in table.to_dicts() %}
        <tr>
            {% for h in table.columns %}
                {% if h == 'ID #' %}
                    {% set string_cid = '{:06d}'.format(row['ID #'] | int) %}
                    <td><a href="{{ base_detail_url.format(year_term=row['year_term'], course_id=string_cid) }}">{{ string_cid }}</a></td>
                {% else %}
                    <td>{{ row[h] }}</td>
                {% endif %}
            {% endfor %}
        </tr>
    {% endfor %}

</tbody>

</table>

<footer class="pt-4 my-md-5 pt-md-5 border-top">
    <div class="row text-muted">
        This page generated by
        <a href="https://github.com/mwcraig/headcounts-web">headcounts-web</a>,
        a small <a href="http://flask.pocoo.org/">Flask</a> app with styling by
        <a href="https://pythonhosted.org/Flask-Bootstrap/">Flask-Bootstrap</a>,
        which is in turn based on <a href="https://getbootstrap.com/docs/3.3/">
        Bootstrap</a>. Hosted by <a href="https://www.heroku.com/">Heroku</a>.<br/><br/>
        The original version of this program was written by <a href="https://github.com/mwcraig/">Matthew Craig</a>.  This version is maintained by <a href="https://web.mnstate.edu/cabanela/">Juan Cabanela</a>.
    </div>
</br>
</br>
</br>
</br>
</footer>
</div>

{% endblock %}
