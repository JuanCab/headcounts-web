{% extends "bootstrap/base.html" %}

<link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" >

{% block content %}
<div class='container'>
<h3> Data for: {{ year_term }} </h3>
<h3>Credit hours generated by these courses (assume variable credit is 1 credit): {{ sch }}</h3>
<h3>Estimate tuition revenue (assuming all in-state): {{ "${:,.2f}".format(revenue) }}</h3>
<h3>Total empty seats in these courses (excludes canceled): {{ seats['empty'] }} of {{ seats['available'] }} available.</h3>
<h5>(Note: the number of empty seats is the course size limit (Size) minus the enrollment or zero if the course is over-enrolled.)</h5>
<h5>(percent empty is {{ 100 * seats['empty'] / seats['available'] }})</h5>

<h4><a href="{{ url_for('download', filename=filename) }}">Download this data</a></h4>

<h3>Newest data in this table was gathered: {{ most_recent }}</h3>
<h3>"Average" date of collection for entire dataset: {{ timestamp }}</h3>

<table class="table table-striped table-bordered table-responsive table-hover">

<thead>
    {% for h in table.colnames %}
        <th>{{ h }}</th>
    {% endfor %}
</thead>

<tbody>
    {% for row in table %}
        <tr>
            {% for h in table.colnames %}
                {% if h == 'ID #' %}
                    {% set string_cid = '{:06d}'.format(row['ID #'] | int) %}
                    <td><a href="{{ base_detail_url.format(year_term=row['year_term'], course_id=string_cid) }}">{{ string_cid }}</a></td>
                {% else %}
                    <td>{{ row[h] }}</td>
                {% endif %}
            {% endfor %}
        </tr>
    {% endfor %}

</tbody>

</table>
</div>
{% endblock %}
